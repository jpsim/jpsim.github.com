
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>CocoaPods Tips & Tricks - JP Simard - iOS Developer</title>
  <meta name="description" content="CocoaPods documentation isn&#8217;t very opiniated, which can cause confusion for newcomers. Here are a few tricks I&#8217;ve picked up after &hellip;">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="canonical" href="http://jpsim.github.com/cocoapods-tips-tricks">
  <link href="/favicon.ico" rel="shortcut icon"> 
  <!--[if lt IE 9]>
    <script src="//html5shim.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->
  <link href="/stylesheets/screen.css" rel="stylesheet">
  <link href="/stylesheets/widescreen.css" rel="stylesheet" media="screen and (min-width: 45em)">
  
  <script src="//use.typekit.net/nhv5bly.js"></script>
  <script>try{Typekit.load();}catch(e){}</script>
  <link href="http://jpsim.github.com/atom.xml" rel="alternate" title="JP Simard" type="application/atom+xml">
</head>

<body >
  <header class="main-header" role="banner">
        <h1><a href="/">JP Simard</a> &mdash; iOS Developer</h1>
    <nav role="navigation">
      <ul class="main-nav">
  <li><a href="/">Home</a></li>
  <li><a href="https://twitter.com/simjp">Twitter</a></li>
  <li><a href="https://github.com/jpsim">GitHub</a></li>
  <li><a href="http://realm.io">Realm</a></li>
  <li><a href="/archives">Archives</a></li>
  <li><a href="/about">About</a></li>
</ul>

    </nav>
  </header>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <p class="meta">
        








  


<time datetime="2014-03-12T09:45:00-04:00" pubdate data-updated="true">Mar 12<span>th</span>, 2014</time>
        

         | <a class="disqus-link" href="#disqus_thread">Comments</a>
        
        | <a class="rss-feed" href="http://jpsim.github.com/atom.xml">RSS Feed</a>
      </p>
    
    
      <h1 class="entry-title">CocoaPods Tips & Tricks</h1>
    
  </header>


<div class="entry-content"><p><a href="http://cocoapods.org">CocoaPods</a> documentation isn&#8217;t very opiniated, which can cause confusion for newcomers. Here are a few tricks I&#8217;ve picked up after building a few dozen projects with CocoaPods.</p>

<h2>Source Control</h2>

<p>Should you check in <code>Podfile.lock</code>? How about your <code>*.xcworkspace</code> and the <code>Pods</code> directory? Since all of these are automatically generated by running <code>pod install</code>, is it redundant to also include them in your source control?</p>

<p>Some CocoaPods maintainers recommend to check everything in.</p>

<p>My approach is to check in <code>Podfile.lock</code> but not <code>xcworkspace</code> and <code>Pods</code>. Here&#8217;s why:</p>

<h3>Podfile.lock</h3>

<p>Checking in <code>Podfile.lock</code> has the advantage of keeping track of the pod versions last used when working on the project. Also, if you run <code>pod install</code> and some pods have changed versions, you&#8217;ll see the change in your next commit, encouraging you to confirm that nothing broke.</p>

<h3>Workspace</h3>

<p>In most cases, checking in the <code>*.xcworkspace</code> to source control is unnecessary, since <code>pod install</code> will automatically generate it for you. There are rare cases in which you need to customize it, in which case you should check it in.</p>

<h3>Pods Directory</h3>

<p>Checking in the <code>Pods</code> directory is a contested issue. Checking it in allows full control of the pods and will ensure you review every change to your vendored code. Not checking it in will keep your code more decoupled from its dependencies and clean up your commit logs. I don&#8217;t do it because it ends up creating too many commit messages, especially if you&#8217;re using a library which is updated very often, like <a href="https://github.com/AFNetworking/AFNetworking">AFNetworking</a>. Most dependency managers in other languages tend to not check in dependencies as well (i.e. npm &amp; rubygems).</p>

<h3>Finalizing a Project</h3>

<p>If I&#8217;m going to stop working on a project for a while, or I&#8217;m handing it off to a client, I&#8217;ll create a branch with everything checked in. <code>Podfile.lock</code>, <code>*.xcworkspace</code> and <code>Pods</code>. This way, even if pods change over time, or they&#8217;re removed from github, or whatever happens, I&#8217;m sure to have a working version of my project.</p>

<h3>Resources</h3>

<p>No matter what strategy you choose to take for CocoaPods SCM, be aware of the pros/cons of each.</p>

<p>Here are a few resources to help you decide:</p>

<ul>
<li><a href="https://github.com/CocoaPods/pod-template/blob/master/.gitignore">Official CocoaPods <code>.gitignore</code></a></li>
<li><a href="https://github.com/swizzlr/integer">CocoaPods plugin to maintain pod integrity</a></li>
<li><a href="https://twitter.com/simjp/status/443779386865500160">An interesting Twitter conversation about this article :)</a></li>
</ul>


<h2>Modifying Pods</h2>

<p>Before modifying a pod, ask yourself if it&#8217;s necessary. Often, a category or subclass will do.</p>

<p>Pre-CocoaPods, when all vendored code was checked in, it was trivial to make small changes to 3rd party code. It&#8217;s still easy now, but not as obvious. There are many ways to make changes to Pods in your project:</p>

<h3>1. Pull Request</h3>

<p>If your modifications are useful to other users of the 3rd party library, then consider submitting a <a href="https://help.github.com/articles/using-pull-requests">Pull Request</a>. This way, everyone benefits. Hopefully it will be merged quickly.</p>

<h3>2. Fork</h3>

<p>Certain projects are notorious for taking a long time to merge PR&#8217;s (<a href="https://github.com/kif-framework/KIF">cough</a>). In those cases or cases when your PR&#8217;s aren&#8217;t accepted, it can be useful to just point your <code>Podfile</code> to your fork of the project. Add this to your <code>Podfile</code>:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">pod</span> <span class="s1">&#39;KIF&#39;</span><span class="p">,</span> <span class="ss">:git</span> <span class="o">=&gt;</span> <span class="s1">&#39;https://github.com/ksuther/KIF&#39;</span>
</span></code></pre></td></tr></table></div></figure>


<p>The downside to this approach is that you have to keep your fork up to date, which is where the patchfile approach comes in.</p>

<h3>3. Diffs</h3>

<p>If your modifications are small, I&#8217;d encourage you to use patchfiles (<code>*.diff</code>) to apply them to your pods. This will apply your modifications every time you run <code>pod install</code>, with the added benefit of using the latest upstream updates. To see how it works, take a look at this github project: <a href="https://github.com/jpsim/pod-diffs">jpsim/pod-diffs</a>.</p>

<p><em>Sidenote: patchfiles are super neat! Even if you modify code around your modification or the line numbers change, it&#8217;s smart enought to find it again!</em></p>

<h3>4. Check it in</h3>

<p>This is a last resort. If all other methods fail, check in your vendored code into your project outside of CocoaPods. Then, you&#8217;re free to modify it in any way you see fit. But then you need to update it manually when the upstream version changes.</p>

<h2>Continuous Integration &amp; Xcode Bots</h2>

<p>There&#8217;s this misconception that using Xcode 5&#8217;s <a href="https://developer.apple.com/library/ios/documentation/IDEs/Conceptual/xcode_guide-continuous_integration/ConfigureBots/ConfigureBots.html">Bots</a> feature for CI with CocoaPods projects means that you <strong>must</strong> check in your pods. In fact, Xcode Bots have the ability to run scripts prior to building your app. Check out <a href="https://gist.github.com/mtitolo/f5283c54e300d88d9418">this gist</a> for a comprehensive guide to Bots and CocoaPods.</p>

<hr />

<p><em>Thanks to @alloy, @aschndr, @ashfurrow &amp; @swizzlr for their feedback while writing this article</em></p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <a href="/about" class="fn">JP Simard</a></span>
 <span>on</span>
      








  


<time datetime="2014-03-12T09:45:00-04:00" pubdate data-updated="true">Mar 12<span>th</span>, 2014</time>
      in 

<span class="categories">
  
    <a class='category' href='/categories/cocoapods/'>cocoapods</a>, <a class='category' href='/categories/development/'>development</a>, <a class='category' href='/categories/git/'>git</a>, <a class='category' href='/categories/ios/'>ios</a>
  
</span>

.
      <span class="pull-request">If you would like to update this post, <a href="https://github.com/jpsim/jpsim.github.com/blob/source/source/_posts/2014-03-12-cocoapods-tips-tricks.markdown"> please send a pull request</a> on GitHub.</span>
    </p>
    
      <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://jpsim.github.com/cocoapods-tips-tricks/" data-via="simjp" data-counturl="http://jpsim.github.com/cocoapods-tips-tricks/" >Tweet</a>
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/jpsvolumebuttonhandler/" title="Previous Post: JPSVolumeButtonHandler">&laquo; Previous</a>
      
      
        <a class="basic-alignment right" href="/private-pods/" title="Next Post: Private Pods">Next &raquo;</a>
      
    </p>
  </footer>
</article>

  <section class="comments">
    <h2>Comments</h2>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>

<aside class="sidebar">
  
    <section>
  <p class="biog"><a href="https://twitter.com/simjp">JP Simard</a> is an iOS developer. <a href="/about">More about me &raquo;</a>
</section>

  
</aside>


    </div>
  </div>
  <footer class="footer" role="contentinfo"><p>
  &copy; 2014 JP Simard
  <span class="credit">&mdash; Powered by <a href="http://octopress.org">Octopress</a>, fonts served by <a href="https://typekit.com/colophons/nhv5bly">Typekit</a>, hosted by <a href="https://github.com/jpsim/jpsim.github.com">GitHub</a>.</span>
</p>

<p class="top"><a href="#">Back to top &uarr;</a></p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'simjp';
      var disqus_developer = 1;

      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://jpsim.com/cocoapods-tips-tricks/';
        var disqus_url = 'http://jpsim.com/cocoapods-tips-tricks/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



  <script>
    var _gaq=[['_setAccount','UA-35217213-1'],['_trackPageview']];
    (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
    g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
    s.parentNode.insertBefore(g,s)}(document,'script'));
  </script>



</body>
</html>
